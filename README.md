# xcstrings-cli

A command-line tool designed for working with **xcstrings** files.

## Guiding Principles

This tool is built with the following goals in mind:

- **Preserve Xcode’s formatting**: It avoids making unnecessary changes to `xcstrings` files generated by Xcode, including indentation, spacing, and ordering.
- **No automatic translation**: It does not translate any content in your existing `xcstrings` files. The tool’s purpose is to help you manage and manipulate the files.
- **AI-friendly workflow**: It is designed to make it easy to import translations generated by AI services now and in the future.

## AI Translation Support

We also provide a Custom GPT that can help you generate translations and output them in the form of an `xcstrings` command.  
Check it out here: [xcstrings-cli Helper](https://chatgpt.com/g/g-69365945f8bc8191be3146f880238957-xcstrings-cli-helper).

## Installation

1. Install xcstrings-cli using npm:
    ```bash
    npm install -g xcstrings-cli
    ```

2. Initialize xcstrings-cli:
    ```bash
    xcstrings init
    ```

This will ask you some questions and create an `xcstrings-cli.json` file in the current directory.

## Usage

**Add a string:**

```bash
xcstrings add \
    --key greeting \
    --comment "Hello, World" \
    --strings << EOF
{
    "ja": "こんにちは、世界。",
    "en": "Hello, World.",
    "zh-Hans": "你好，世界。"
}
EOF
```

**Remove a string:**

```bash
xcstrings remove --key greeting
```

**List supported languages:**

This command lists all languages by checking xcstrings files and your Xcode project settings (`.pbxproj` specified in the config file as `xcodeprojPaths`).

```bash
xcstrings languages
# en ja zh-Hans
```

You can use `xcstrings --help` or `xcstrings <sub-command> --help` to see the list of commands and options.

## Command options

* `--help, -h`: `boolean` (Optional)
  * Show help.
* `--version, -v`: `boolean` (Optional)
  * Show version.
* `--config`: `string` (Optional)
  * The custom config file path. If not specified, xcstrings-cli will look for `xcstrings-cli.json` or `xcstrings-cli.json5` in the current folder or its parent folders until the root.

### `add` command options

* `--strings, -s`: `string | string[] | { [key: string]: string }` (Required)
  * The strings to add or update.
  * If only one string is provided, xcstrings-cli will use it as the default string.
* `--comment, -c`: `string` (Optional)
  * The comment for the string to add, intended for translators.
* `--extractionState, -e`: `string` (Optional, default: `manual`)
  * The extraction state of the string to add: `translated` or `manual`.
* `--help`: `boolean` (Optional)

  * Show help.

## Config file

Put an `xcstrings-cli.json5` or `xcstrings-cli.json` file in the project root, and xcstrings-cli will use it as the config file.

```json5
{
    "xcstringsPaths": [
        "Shared/L10n/Localizable.xcstrings",
        {
          "alias": "utils",
          "path": "packages/Utils/Sources/Utils/Resources/Localizable.xcstrings"
        }
    ],
    "xcodeprojPaths": [
        "path/to/your/Project.xcodeproj"
    ]
}
```

These are the options for the config file:

* **xcstringsPaths**: `string[] | { alias: string, path: string }[]`
  * If only one path is provided, xcstrings-cli will use it as the default xcstrings file.
  * If multiple paths are provided, xcstrings-cli will ask you to select an xcstrings file.
* **xcodeprojPaths**: `string[]` (Optional)
  * Paths to Xcode project files used to detect supported languages.
  * If not specified, xcstrings-cli will not check the supported languages in your Xcode project.
* **missingLanguagePolicy**: `string` (Optional, default: `skip`)
  * How to handle translations for languages that are not included in the `xcstrings languages` output when adding strings. Options are:
    * `skip`: Only add translations for languages included in the `xcstrings languages` output.
    * `include`: Add translations anyway.

## LICENSE

MIT
